<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pico-scale: pico-scale</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pico-scale
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">pico-scale </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
NOTE: DOCUMENTATION IS OLD. REFER TO [tests/main.c](the test code) for an example.</h1>
<p>A scale API for a Raspberry Pi Pico (RP2040).</p>
<p><img src="resources/hx711_serialout.gif" alt="resources/hx711_serialout.gif" class="inline"/></p>
<p>The .gif above illustrates the <a href="main.c">current example code</a> obtaining data from a HX711 operating at 80 samples per second. Each line shows the current weight calculated from all samples obtained within 250 milliseconds, along with the minimum and maximum weights of the scale since boot. I applied pressure to the load cell to show the change in weight.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Clone</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Method 1</h2>
<p>If you want to use this repository as-is with the example code, clone the respository and initialise the <code>hx711-pico-c</code> submodule.</p>
<div class="fragment"><div class="line">git clone --recurse-submodules --remote-submodules https://github.com/endail/pico-scale</div>
</div><!-- fragment --><p>Then <code>#include</code> as follows:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;../include/hx711_scale_adaptor.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../include/scale.h&quot;</span></div>
</div><!-- fragment --><p>Run CTest to build the example and calibration programs. The <code>.uf2</code> files you upload to your Pico will be found under <code>build/tests/</code>.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Method 2</h2>
<p>Alternatively, if you want to use the scale functionality as an API in your own project, add <code>pico-scale</code> as a submodule and then initialise it.</p>
<div class="fragment"><div class="line">git submodule add https://github.com/endail/pico-scale extern/pico-scale</div>
<div class="line">git submodule update --init --remote --recursive</div>
</div><!-- fragment --><p>Then, from your own code, <code>#include</code> the relevant files as follows and initialise the hx711:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;extern/pico-scale/include/hx711_scale_adaptor.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;extern/pico-scale/include/scale.h&quot;</span></div>
</div><!-- fragment --><p>See the explanation <a href="https://github.com/endail/hx711-pico-c#custom-pio-programs">here</a> for why you need to manually include the PIO program.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Documentation</h1>
<p><a href="https://endail.github.io/pico-scale/">https://endail.github.io/pico-scale</a></p>
<h1><a class="anchor" id="autotoc_md6"></a>
Initialise the HX711</h1>
<p>You will always need to initialise the HX711 before using it as a scale. See <a href="https://github.com/endail/hx711-pico-c#how-to-use">here</a> for how to do that.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
How to Use the HX711 as a Scale</h1>
<div class="fragment"><div class="line"><a class="code" href="structscale__t.html">scale_t</a> sc;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// the values obtained when calibrating the scale</span></div>
<div class="line"><span class="comment">// if you don&#39;t know them, read the following section How to Calibrate</span></div>
<div class="line"><a class="code" href="mass_8h.html#a63594d9cf123405a03d0ab838daa9a27">mass_unit_t</a> scaleUnit = <a class="code" href="mass_8h.html#a63594d9cf123405a03d0ab838daa9a27a0c784ed2f761029d8d4bd33c07612dfb">mass_g</a>;</div>
<div class="line">int32_t refUnit = -432;</div>
<div class="line">int32_t offset = -367539;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="scale_8h.html#abb8d809b207914282a53c53099c74d37">scale_init</a>(</div>
<div class="line">    &amp;sc,</div>
<div class="line">    &amp;hx, <span class="comment">// pass a pointer to the hx711_t</span></div>
<div class="line">    scaleUnit,</div>
<div class="line">    refUnit,</div>
<div class="line">    offset);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 3. Set options for how the scale will read and interpret values</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// SCALE_DEFAULT_OPTIONS will give some default settings which you</span></div>
<div class="line"><span class="comment">// do not have to use</span></div>
<div class="line"><a class="code" href="structscale__options__t.html">scale_options_t</a> opt = <a class="code" href="scale_8h.html#a0ee40743499233ab7ded69bc522adcf3">SCALE_DEFAULT_OPTIONS</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// scale_options_t has the following options</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// opt.strat, which defines how the scale will collect data. By default,</span></div>
<div class="line"><span class="comment">// data is collected according to the number of samples. So opt.strat</span></div>
<div class="line"><span class="comment">// is set to strategy_type_samples. opt.samples defines how many samples</span></div>
<div class="line"><span class="comment">// to obtain. You can also set opt.strat to read_type_time which will</span></div>
<div class="line"><span class="comment">// collect as many samples as possible within the timeout period. The</span></div>
<div class="line"><span class="comment">// timeout period is defined by opt.timeout and is given in microseconds</span></div>
<div class="line"><span class="comment">// (us). For example, 1 second is equal to 1,000,000 us.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// opt.read, which defines how the scale will interpret data. By default,</span></div>
<div class="line"><span class="comment">// data is interpreted according to the median value. So opt.read is set</span></div>
<div class="line"><span class="comment">// to read_type_median. You can also set opt.read to read_type_average</span></div>
<div class="line"><span class="comment">// which will calculate the average value.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Example:</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// opt.strat = strategy_type_time;</span></div>
<div class="line"><span class="comment">// opt.read = read_type_average;</span></div>
<div class="line"><span class="comment">// opt.timeout = 250000;</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// These options mean... collect as many samples as possible within 250ms</span></div>
<div class="line"><span class="comment">// and then use the average of all those samples.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// 4. Zero the scale (OPTIONAL) (aka. tare)</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(<a class="code" href="scale_8h.html#a2856aa7de7bc3367436768b16c7635d2">scale_zero</a>(&amp;sc, &amp;opt)) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Scale zeroed successfully\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Scale failed to zero\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 5. Obtain the weight</span></div>
<div class="line"><a class="code" href="structmass__t.html">mass_t</a> mass;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(<a class="code" href="scale_8h.html#a3e40634ba10306170af7c5efd6763731">scale_weight</a>(&amp;sc, &amp;mass, &amp;opt)) {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// mass will contain the weight on the scale obtanined and interpreted</span></div>
<div class="line">    <span class="comment">// according to the given options and be in the unit defined by the</span></div>
<div class="line">    <span class="comment">// mass_unit_t &#39;scaleUnit&#39; variable above</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// you can now:</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// get the weight as a numeric value according to the mass_unit_t</span></div>
<div class="line">    <span class="keywordtype">double</span> val;</div>
<div class="line">    <a class="code" href="mass_8h.html#aef16e19a65a6356df8d2853a64e51da1">mass_get_value</a>(&amp;mass, &amp;val);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// convert the mass to a string</span></div>
<div class="line">    <span class="keywordtype">char</span> buff[<a class="code" href="mass_8h.html#ae8be3e5bc64f2ae5441d61c5ee080a8f">MASS_TO_STRING_BUFF_SIZE</a>];</div>
<div class="line">    <a class="code" href="mass_8h.html#a367bf5be9ac90d196919b0d5fbf63d93">mass_to_string</a>(&amp;mass, buff);</div>
<div class="line">    printf(<span class="stringliteral">&quot;%s\n&quot;</span>, buff);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// or do other operations (see: mass.h file)</span></div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Failed to read weight\n&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="amass_8h_html_a367bf5be9ac90d196919b0d5fbf63d93"><div class="ttname"><a href="mass_8h.html#a367bf5be9ac90d196919b0d5fbf63d93">mass_to_string</a></div><div class="ttdeci">int mass_to_string(const mass_t *const m, char *const buff)</div><div class="ttdoc">Fills buff with the string representation of the mass_t. eg. &quot;32.4762 mg&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="mass_8c_source.html#l00241">mass.c:241</a></div></div>
<div class="ttc" id="amass_8h_html_a63594d9cf123405a03d0ab838daa9a27"><div class="ttname"><a href="mass_8h.html#a63594d9cf123405a03d0ab838daa9a27">mass_unit_t</a></div><div class="ttdeci">mass_unit_t</div><div class="ttdef"><b>Definition:</b> <a href="mass_8h_source.html#l00064">mass.h:64</a></div></div>
<div class="ttc" id="amass_8h_html_a63594d9cf123405a03d0ab838daa9a27a0c784ed2f761029d8d4bd33c07612dfb"><div class="ttname"><a href="mass_8h.html#a63594d9cf123405a03d0ab838daa9a27a0c784ed2f761029d8d4bd33c07612dfb">mass_g</a></div><div class="ttdeci">@ mass_g</div><div class="ttdef"><b>Definition:</b> <a href="mass_8h_source.html#l00067">mass.h:67</a></div></div>
<div class="ttc" id="amass_8h_html_ae8be3e5bc64f2ae5441d61c5ee080a8f"><div class="ttname"><a href="mass_8h.html#ae8be3e5bc64f2ae5441d61c5ee080a8f">MASS_TO_STRING_BUFF_SIZE</a></div><div class="ttdeci">static const size_t MASS_TO_STRING_BUFF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="mass_8h_source.html#l00059">mass.h:59</a></div></div>
<div class="ttc" id="amass_8h_html_aef16e19a65a6356df8d2853a64e51da1"><div class="ttname"><a href="mass_8h.html#aef16e19a65a6356df8d2853a64e51da1">mass_get_value</a></div><div class="ttdeci">void mass_get_value(const mass_t *const m, double *const val)</div><div class="ttdoc">Sets val to the value representing the mass_t according to its unt.</div><div class="ttdef"><b>Definition:</b> <a href="mass_8c_source.html#l00076">mass.c:76</a></div></div>
<div class="ttc" id="ascale_8h_html_a0ee40743499233ab7ded69bc522adcf3"><div class="ttname"><a href="scale_8h.html#a0ee40743499233ab7ded69bc522adcf3">SCALE_DEFAULT_OPTIONS</a></div><div class="ttdeci">static const scale_options_t SCALE_DEFAULT_OPTIONS</div><div class="ttdef"><b>Definition:</b> <a href="scale_8h_source.html#l00056">scale.h:56</a></div></div>
<div class="ttc" id="ascale_8h_html_a2856aa7de7bc3367436768b16c7635d2"><div class="ttname"><a href="scale_8h.html#a2856aa7de7bc3367436768b16c7635d2">scale_zero</a></div><div class="ttdeci">bool scale_zero(scale_t *const sc, const scale_options_t *const opt)</div><div class="ttdoc">Zeros the scale (tare) by adjusting its offset from 0 according to the given options....</div><div class="ttdef"><b>Definition:</b> <a href="scale_8c_source.html#l00204">scale.c:204</a></div></div>
<div class="ttc" id="ascale_8h_html_a3e40634ba10306170af7c5efd6763731"><div class="ttname"><a href="scale_8h.html#a3e40634ba10306170af7c5efd6763731">scale_weight</a></div><div class="ttdeci">bool scale_weight(scale_t *const sc, mass_t *const m, const scale_options_t *const opt)</div><div class="ttdoc">Obtains a weight from the scale according to the given options. Returns true if the operation succeed...</div><div class="ttdef"><b>Definition:</b> <a href="scale_8c_source.html#l00229">scale.c:229</a></div></div>
<div class="ttc" id="ascale_8h_html_abb8d809b207914282a53c53099c74d37"><div class="ttname"><a href="scale_8h.html#abb8d809b207914282a53c53099c74d37">scale_init</a></div><div class="ttdeci">void scale_init(scale_t *const sc, scale_adaptor_t *const adaptor, const mass_unit_t unit, const int32_t ref_unit, const int32_t offset)</div><div class="ttdoc">Initialise the scale with a hx711_t.</div><div class="ttdef"><b>Definition:</b> <a href="scale_8c_source.html#l00039">scale.c:39</a></div></div>
<div class="ttc" id="astructmass__t_html"><div class="ttname"><a href="structmass__t.html">mass_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mass_8h_source.html#l00093">mass.h:93</a></div></div>
<div class="ttc" id="astructscale__options__t_html"><div class="ttname"><a href="structscale__options__t.html">scale_options_t</a></div><div class="ttdef"><b>Definition:</b> <a href="scale_8h_source.html#l00047">scale.h:47</a></div></div>
<div class="ttc" id="astructscale__t_html"><div class="ttname"><a href="structscale__t.html">scale_t</a></div><div class="ttdef"><b>Definition:</b> <a href="scale_8h_source.html#l00073">scale.h:73</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md8"></a>
How to Calibrate</h1>
<ol type="1">
<li>Modify <a href="tests/calibration.c#L68-L73">the calibration program</a> and change the clock and data pins to those connected to the HX711. Also change the rate at which the HX711 operates if needed.</li>
<li>Build by running <code>CTest</code>.</li>
<li>Copy <code>calibration.uf2</code> in the <code>build/tests/</code> directory to the Raspberry Pi Pico.</li>
<li>Open a serial connection to the Pico at a baud rate of 115200 and follow the prompts.</li>
</ol>
<h1><a class="anchor" id="autotoc_md9"></a>
FAQ</h1>
<p>Q: __"Which mass units are supported?"__</p>
<p>A: The following <code>mass_unit_t</code>s are available.</p>
<ul>
<li><code>mass_ug</code>: micrograms</li>
<li><code>mass_mg</code>: milligrams</li>
<li><code>mass_g</code>: grams</li>
<li><code>mass_kg</code>: kilograms</li>
<li><code>mass_ton</code>: metric tons</li>
<li><code>mass_imp_ton</code>: imperial tons</li>
<li><code>mass_us_ton</code>: US tons</li>
<li><code>mass_st</code>: stones</li>
<li><code>mass_lb</code>: pounds</li>
<li><code>mass_oz</code>: ounces</li>
</ul>
<p>Q: __"How do I get the weight in pounds/ounces/tons/etc...?"__</p>
<p>A: You can either: set the <code><a class="el" href="structscale__t.html">scale_t</a></code> or change the <code><a class="el" href="structmass__t.html">mass_t</a></code>.</p>
<div class="fragment"><div class="line"><span class="comment">// 1. setting the scale_t</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// when you initialise the scale</span></div>
<div class="line"><a class="code" href="scale_8h.html#abb8d809b207914282a53c53099c74d37">scale_init</a>(</div>
<div class="line">    &amp;sc,</div>
<div class="line">    &amp;hx,</div>
<div class="line">    <a class="code" href="mass_8h.html#a63594d9cf123405a03d0ab838daa9a27a0ce798200bf70bb546af204a946c1eca">mass_imp_ton</a>, <span class="comment">//change the scaleUnit to your chosen mass_unit_t</span></div>
<div class="line">    refUnit,</div>
<div class="line">    offset);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// or, if you&#39;ve already initialised the scale</span></div>
<div class="line">sc.<a class="code" href="structscale__t.html#aac67f2643900b076bd2d3c952c4af18b">unit</a> = <a class="code" href="mass_8h.html#a63594d9cf123405a03d0ab838daa9a27a0ce798200bf70bb546af204a946c1eca">mass_imp_ton</a>;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// 2. change the mass_t</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// if, for whatever reason, you are initialising a mass_t</span></div>
<div class="line"><a class="code" href="mass_8h.html#a920adcefe77cc1984ff48c7cc19c2932">mass_init</a>(</div>
<div class="line">    &amp;m,</div>
<div class="line">    <a class="code" href="mass_8h.html#a63594d9cf123405a03d0ab838daa9a27a7af3a1afe5e8180a1089284d09b1d833">mass_lb</a>, <span class="comment">//your desired mass_unit_t</span></div>
<div class="line">    val);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// or, if you&#39;ve already initialised a mass_t</span></div>
<div class="line">m.unit = <a class="code" href="mass_8h.html#a63594d9cf123405a03d0ab838daa9a27a7af3a1afe5e8180a1089284d09b1d833">mass_lb</a>;</div>
<div class="ttc" id="amass_8h_html_a63594d9cf123405a03d0ab838daa9a27a0ce798200bf70bb546af204a946c1eca"><div class="ttname"><a href="mass_8h.html#a63594d9cf123405a03d0ab838daa9a27a0ce798200bf70bb546af204a946c1eca">mass_imp_ton</a></div><div class="ttdeci">@ mass_imp_ton</div><div class="ttdef"><b>Definition:</b> <a href="mass_8h_source.html#l00070">mass.h:70</a></div></div>
<div class="ttc" id="amass_8h_html_a63594d9cf123405a03d0ab838daa9a27a7af3a1afe5e8180a1089284d09b1d833"><div class="ttname"><a href="mass_8h.html#a63594d9cf123405a03d0ab838daa9a27a7af3a1afe5e8180a1089284d09b1d833">mass_lb</a></div><div class="ttdeci">@ mass_lb</div><div class="ttdef"><b>Definition:</b> <a href="mass_8h_source.html#l00073">mass.h:73</a></div></div>
<div class="ttc" id="amass_8h_html_a920adcefe77cc1984ff48c7cc19c2932"><div class="ttname"><a href="mass_8h.html#a920adcefe77cc1984ff48c7cc19c2932">mass_init</a></div><div class="ttdeci">void mass_init(mass_t *const m, const mass_unit_t unit, const double val)</div><div class="ttdoc">Initialises a mass_t with the given unit and value.</div><div class="ttdef"><b>Definition:</b> <a href="mass_8c_source.html#l00064">mass.c:64</a></div></div>
<div class="ttc" id="astructscale__t_html_aac67f2643900b076bd2d3c952c4af18b"><div class="ttname"><a href="structscale__t.html#aac67f2643900b076bd2d3c952c4af18b">scale_t::unit</a></div><div class="ttdeci">mass_unit_t unit</div><div class="ttdef"><b>Definition:</b> <a href="scale_8h_source.html#l00074">scale.h:74</a></div></div>
</div><!-- fragment --><p>Q: __"How do I perform math on the weights?"__</p>
<p>A: You can either: get the underlying value and operate on that, or use the in-built functions to operate on two <code><a class="el" href="structmass__t.html">mass_t</a></code> structs.</p>
<div class="fragment"><div class="line"><span class="comment">// 1. get the underlying value</span></div>
<div class="line"><span class="keywordtype">double</span> val;</div>
<div class="line"><a class="code" href="mass_8h.html#aef16e19a65a6356df8d2853a64e51da1">mass_get_value</a>(&amp;m, &amp;val);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(val &gt;= 10.5) {</div>
<div class="line">    <span class="comment">//do something if val is greater than or equal to 10.5</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//2. built-in functions</span></div>
<div class="line"><span class="keywordflow">if</span>(<a class="code" href="mass_8h.html#a4d0c231bb6a46dc9746cf7ae1695aa3b">mass_gteq</a>(&amp;m1, &amp;m2)) {</div>
<div class="line">    <span class="comment">//do something if m1 is greater than m2</span></div>
<div class="line">}</div>
<div class="ttc" id="amass_8h_html_a4d0c231bb6a46dc9746cf7ae1695aa3b"><div class="ttname"><a href="mass_8h.html#a4d0c231bb6a46dc9746cf7ae1695aa3b">mass_gteq</a></div><div class="ttdeci">bool mass_gteq(const mass_t *const lhs, const mass_t *const rhs)</div><div class="ttdoc">Returns true if lhs is greater than or equal to rhs.</div><div class="ttdef"><b>Definition:</b> <a href="mass_8c_source.html#l00229">mass.c:229</a></div></div>
</div><!-- fragment --><p>The advantage of using the built-in functions is that the <code><a class="el" href="structmass__t.html">mass_t</a></code> structs can be of different units. So you can check if, for example, <code>m1</code> is greater than or equal to <code>m2</code>, even if <code>m1</code> is is in pounds and <code>m2</code> is in kilograms. The conversion is taken care of for you.</p>
<p>Q: __"Which math functions are available?"__</p>
<p>A:</p>
<ul>
<li><code>mass_add(mass_t* lhs, mass_t* rhs, mass_t* res)</code>: add <code>lhs</code> and <code>rhs</code> and store result in <code>res</code></li>
<li><code>mass_sub(mass_t* lhs, mass_t* rhs, mass_t* res)</code>: subtract <code>rhs</code> from <code>lhs</code> and store result in <code>res</code></li>
<li><code>mass_mul(mass_t* lhs, mass_t* rhs, mass_t* res)</code>: multiply <code>lhs</code> and <code>rhs</code> and store result in <code>res</code></li>
<li><code>mass_div(mass_t* lhs, mass_t* rhs, mass_t* res)</code>: divide <code>lhs</code> by <code>rhs</code> and store result in <code>res</code>, returns false if <code>rhs</code> is 0</li>
<li><code>mass_addeq(mass_t* self, mass_t* rhs)</code>: add <code>rhs</code> to <code>self</code></li>
<li><code>mass_subeq(mass_t* self, mass_t* rhs)</code>: subtract <code>rhs</code> from <code>self</code></li>
<li><code>mass_muleq(mass_t* self, mass_t* rhs)</code>: multiply <code>self</code> by <code>rhs</code></li>
<li><code>mass_diveq(mass_t* self, mass_t* rhs)</code>: divide <code>self</code> by <code>rhs</code>, returns false if <code>rhs</code> is 0</li>
<li><code>mass_eq(mass_t* lhs, mass_t* rhs)</code>: return true if <code>lhs</code> equals <code>rhs</code></li>
<li><code>mass_neq(mass_t* lhs, mass_t* rhs)</code>: return true if <code>lhs</code> does not equal <code>rhs</code></li>
<li><code>mass_lt(mass_t* lhs, mass_t* rhs)</code>: return true if <code>lhs</code> is less than <code>rhs</code></li>
<li><code>mass_gt(mass_t* lhs, mass_t* rhs)</code>: return true if <code>lhs</code> is greater than <code>rhs</code></li>
<li><code>mass_lteq(mass_t* lhs, mass_t* rhs)</code>: return true if <code>lhs</code> is less than or equal to <code>rhs</code></li>
<li><code>mass_gteq(mass_t* lhs, mass_t* rhs)</code>: return true if <code>lhs</code> is greater than or equal to <code>rhs</code> </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon May 29 2023 13:10:18 for pico-scale by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
